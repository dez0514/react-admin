import{f as S,r as l,k as a,j as e,P as F,l as T,B as r,T as v,I as u,n as O,S as E}from"./index-8a09e54b.js";import{T as w}from"./typingCard-1181b527.js";import{M as P,F as R,D,P as L,a as N}from"./FormOutlined-a2ed4e56.js";function z(){const[c,f]=S.useMessage(),h=`这里可以对系统中的角色进行管理，例如添加一个新角色分配需要的权限，或者修改系统中已经存在的角色，admin和visitor为基础角色不可删除。<br/>
  基本思路就是：角色与权限挂钩，通过角色来控制页面各处的访问权限，再给用户赋予角色。用户描述其实是指角色描述。<br/>
  初始化页面时获取到各角色绑定的权限信息，将每个路由routes与各个角色role的关系根据权限信息处理好，然后再渲染路由页面，<br/>目前各个路由的role是写的固定值，仅提供思路，不做动态实现。`,[j,g]=l.useState([]),[y,d]=l.useState(!1),[m,p]=l.useState(!1),[n]=a.useForm(),b=()=>{O().then(t=>{if(t.code===0){const s=t.data.map((i,o)=>({key:String(o),role:i.name,...i}));g(s)}})},x=(t=!1,s)=>{if(d(!0),p(t),s){const{name:i,description:o}=s;n.setFieldsValue({name:i,description:o})}},k=()=>{n.validateFields().then(t=>{c.info("角色管理仅提供简单的思路，暂不实现")})},C=()=>{d(!1),p(!1),n.resetFields()},I=t=>{c.info("角色管理仅提供简单的思路，暂不实现")};l.useEffect(()=>{b()},[]);const M=[{title:"角色名称",key:"role",dataIndex:"role"},{title:"角色描述",dataIndex:"description",key:"description"},{title:"操作",key:"action",render:(t,s)=>e.jsxs(E,{children:[e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(R,{}),onClick:()=>x(!0,s)}),e.jsx(D,{type:"vertical"}),e.jsx(L,{title:"提示",description:"确定删除？",onConfirm:()=>I(),okText:"是",cancelText:"否",disabled:s.name==="admin"||s.name==="visitor",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(N,{}),disabled:s.name==="admin"||s.name==="visitor"})})]})}];return e.jsxs(F,{className:"roleManage",children:[f,e.jsx(w,{title:"角色管理",source:h}),e.jsx(T,{className:"tw-mt-[20px]",title:e.jsx(r,{type:"primary",onClick:()=>x(),children:"新增角色"}),children:e.jsx(v,{columns:M,dataSource:j,pagination:{pageSize:10}})}),e.jsx(P,{title:m?"编辑角色":"新增角色",width:800,open:y,onOk:k,onCancel:C,children:e.jsxs(a,{className:"tw-mt-[20px]",form:n,name:"role-form",labelCol:{span:4},children:[e.jsx(a.Item,{name:"name",label:"角色名称",rules:[{required:!0}],children:e.jsx(u,{placeholder:"name",disabled:m})}),e.jsx(a.Item,{name:"description",label:"角色描述",children:e.jsx(u.TextArea,{placeholder:"description"})}),e.jsx(a.Item,{name:"permissions",label:"权限树",children:"权限树...略"})]})})]})}export{z as default};

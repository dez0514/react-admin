import{u as T,d as F,i as v,r as l,l as a,j as e,P as O,n as E,B as r,T as w,I as u,o as D,S as P}from"./index-988698c9.js";import{T as R}from"./typingCard-e43c2752.js";import{M as L,F as N,P as A,D as B}from"./FormOutlined-d17441d7.js";import{D as q}from"./index-b50591e3.js";function G(){const{formatMessage:f}=T();F(f({id:"menu.roleManage"}));const[c,h]=v.useMessage(),j=`这里可以对系统中的角色进行管理，例如添加一个新角色分配需要的权限，或者修改系统中已经存在的角色，admin和visitor为基础角色不可删除。<br/>
  基本思路就是：角色与权限挂钩，通过角色来控制页面各处的访问权限，再给用户赋予角色。用户描述其实是指角色描述。<br/>
  初始化页面时获取到各角色绑定的权限信息，将每个路由routes与各个角色role的关系根据权限信息处理好，然后再渲染路由页面，<br/>目前各个路由的role是写的固定值，仅提供思路，不做动态实现。`,[g,y]=l.useState([]),[b,d]=l.useState(!1),[m,p]=l.useState(!1),[n]=a.useForm(),I=()=>{D().then(t=>{if(t.code===0){const s=t.data.map((i,o)=>({key:String(o),role:i.name,...i}));y(s)}})},x=(t=!1,s)=>{if(d(!0),p(t),s){const{name:i,description:o}=s;n.setFieldsValue({name:i,description:o})}},M=()=>{n.validateFields().then(t=>{c.info("角色管理仅提供简单的思路，暂不实现")})},k=()=>{d(!1),p(!1),n.resetFields()},C=t=>{c.info("角色管理仅提供简单的思路，暂不实现")};l.useEffect(()=>{I()},[]);const S=[{title:"角色名称",key:"role",dataIndex:"role"},{title:"角色描述",dataIndex:"description",key:"description"},{title:"操作",key:"action",render:(t,s)=>e.jsxs(P,{children:[e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(N,{}),onClick:()=>x(!0,s)}),e.jsx(q,{type:"vertical"}),e.jsx(A,{title:"提示",description:"确定删除？",onConfirm:()=>C(),okText:"是",cancelText:"否",disabled:s.name==="admin"||s.name==="visitor",children:e.jsx(r,{type:"primary",shape:"circle",icon:e.jsx(B,{}),disabled:s.name==="admin"||s.name==="visitor"})})]})}];return e.jsxs(O,{className:"roleManage",children:[h,e.jsx(R,{title:"角色管理",source:j}),e.jsx(E,{className:"tw-mt-[20px]",title:e.jsx(r,{type:"primary",onClick:()=>x(),children:"新增角色"}),children:e.jsx(w,{columns:S,dataSource:g,pagination:{pageSize:10}})}),e.jsx(L,{title:m?"编辑角色":"新增角色",width:800,open:b,onOk:M,onCancel:k,children:e.jsxs(a,{className:"tw-mt-[20px]",form:n,name:"role-form",labelCol:{span:4},children:[e.jsx(a.Item,{name:"name",label:"角色名称",rules:[{required:!0}],children:e.jsx(u,{placeholder:"name",disabled:m})}),e.jsx(a.Item,{name:"description",label:"角色描述",children:e.jsx(u.TextArea,{placeholder:"description"})}),e.jsx(a.Item,{name:"permissions",label:"权限树",children:"权限树...略"})]})})]})}export{G as default};
